<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Main.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">games-app</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">Main.kt</span></div><h1>Main.kt</h1><pre class="source lang-java linenums">import controllers.FranchiseAPI
import models.Franchise
import models.Game
import persistence.JSONSerializer
import utils.ScannerInput
import utils.ScannerInput.readNextInt
import utils.ScannerInput.readNextLine
import java.io.File
import kotlin.system.exitProcess

<span class="nc" id="L11">private val franchiseAPI = FranchiseAPI(JSONSerializer(File(&quot;franchises.json&quot;)))</span>

fun main(args: Array&lt;String&gt;) {
<span class="nc" id="L14">    runMenu()</span>
<span class="nc" id="L15">}</span>

fun mainMenu(): Int {
<span class="nc" id="L18">    return ScannerInput.readNextInt(</span>
        &quot;&quot;&quot; 
         &gt; --------------------------------------
         &gt; /        FRANCHISE APP PROJECT       /
         &gt; --------------------------------------
         &gt; / FRANCHISE MENU                     /
         &gt; /   1) Add a franchise               /
         &gt; /   2) Update franchises             /
         &gt; /   3) Delete franchises             /
         &gt; /   4) List franchises               /
         &gt; --------------------------------------
         &gt; / GAME MENU                          /
         &gt; /   5) Add a game to a franchise     /
         &gt; /   6) Update a game from a franchise/
         &gt; /   7) Delete a game from a franchise/
         &gt; /   8) List all games                /
         &gt; --------------------------------------
         &gt; / REPORT MENU                        /
         &gt; /   9) Search all franchises         /
         &gt; /  10) Search all games              /
         &gt; --------------------------------------
         &gt; / DATA MENU                          /
         &gt; /  11) Save data                     /
         &gt; /  12) Load data                     /
         &gt; --------------------------------------
         &gt; /   0) Exit                          /
         &gt; --------------------------------------
<span class="nc" id="L45">         &gt; ==&gt;&gt; &quot;&quot;&quot;.trimMargin(&quot;&gt;&quot;)</span>
    )
}

fun runMenu() {
    do {
<span class="nc" id="L51">        val option = mainMenu()</span>
<span class="nc bnc" id="L52" title="All 14 branches missed.">        when (option) {</span>
<span class="nc" id="L53">            1 -&gt; addFranchise()</span>
<span class="nc" id="L54">            2 -&gt; updateFranchise()</span>
<span class="nc" id="L55">            3 -&gt; deleteFranchise()</span>
<span class="nc" id="L56">            4 -&gt; listFranchises()</span>

<span class="nc" id="L58">            5 -&gt; addGame()</span>
<span class="nc" id="L59">            6 -&gt; updateGame()</span>
<span class="nc" id="L60">            7 -&gt; deleteGame()</span>
<span class="nc" id="L61">            8 -&gt; listGames()</span>

<span class="nc" id="L63">            9 -&gt; searchFranchises()</span>
<span class="nc" id="L64">            10 -&gt; searchGames()</span>

<span class="nc" id="L66">            11 -&gt; save()</span>
<span class="nc" id="L67">            12 -&gt; load()</span>
<span class="nc" id="L68">            0 -&gt; exit()</span>
<span class="nc" id="L69">            else -&gt; println(&quot;Invalid option entered: $option&quot;)</span>
        }
<span class="nc" id="L71">    } while (true)</span>
}

// FRANCHISES ///////////////////////////////////////////////////////////////////////////
fun addFranchise() {
<span class="nc" id="L76">    val franName = readNextLine(&quot;Enter the name of the franchise: &quot;)</span>
<span class="nc" id="L77">    val franPublisher = readNextLine(&quot;Enter the name of the publisher: &quot;)</span>
<span class="nc" id="L78">    val franWorth = readNextInt(&quot;Enter how much the franchise is worth: &quot;)</span>
<span class="nc" id="L79">    val franGenre = readNextLine(&quot;Enter the genre of the franchise: &quot;)</span>
<span class="nc" id="L80">    val isAdded = franchiseAPI.add(Franchise(franName = franName, franPublisher = franPublisher, franWorth = franWorth, franGenre = franGenre))</span>

<span class="nc bnc" id="L82" title="All 2 branches missed.">    if (isAdded) {</span>
<span class="nc" id="L83">        println(&quot;Added Franchise Successfully&quot;)</span>
    } else {
<span class="nc" id="L85">        println(&quot;Add Failed&quot;)</span>
    }
<span class="nc" id="L87">}</span>

fun updateFranchise() {
<span class="nc" id="L90">    listFranchises()</span>
<span class="nc bnc" id="L91" title="All 2 branches missed.">    if (franchiseAPI.numberOfFranchises() &gt; 0) {</span>
<span class="nc" id="L92">        val id = readNextInt(&quot;Enter the id of the franchise to update: &quot;)</span>
<span class="nc bnc" id="L93" title="All 2 branches missed.">        if (franchiseAPI.findFranchise(id) != null) {</span>
<span class="nc" id="L94">            val franName = readNextLine(&quot;Enter the name of the franchise: &quot;)</span>
<span class="nc" id="L95">            val franPublisher = readNextLine(&quot;Enter the name of the publisher: &quot;)</span>
<span class="nc" id="L96">            val franWorth = readNextInt(&quot;Enter how much the franchise is worth: &quot;)</span>
<span class="nc" id="L97">            val franGenre = readNextLine(&quot;Enter the genre of the franchise: &quot;)</span>

<span class="nc bnc" id="L99" title="All 2 branches missed.">            if (franchiseAPI.update(id, Franchise(0, franName, franPublisher, franWorth, franGenre))) {</span>
<span class="nc" id="L100">                println(&quot;Update Successful&quot;)</span>
            } else {
<span class="nc" id="L102">                println(&quot;Update Failed&quot;)</span>
            }
        } else {
<span class="nc" id="L105">            println(&quot;There are no franchises for this index number&quot;)</span>
        }
    }
<span class="nc" id="L108">}</span>

fun deleteFranchise() {
<span class="nc" id="L111">    listFranchises()</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">    if (franchiseAPI.numberOfFranchises() &gt; 0) {</span>
<span class="nc" id="L113">        val id = readNextInt(&quot;Enter the id of the franchise to delete: &quot;)</span>
<span class="nc" id="L114">        val franToDelete = franchiseAPI.delete(id)</span>
<span class="nc bnc" id="L115" title="All 2 branches missed.">        if (franToDelete) {</span>
<span class="nc" id="L116">            println(&quot;Delete Successful!&quot;)</span>
        } else {
<span class="nc" id="L118">            println(&quot;Delete NOT Successful&quot;)</span>
        }
    }
<span class="nc" id="L121">}</span>

fun searchFranchises() {
<span class="nc" id="L124">    val searchName = readNextLine(&quot;Enter the name of franchise to search for: &quot;)</span>
<span class="nc" id="L125">    val searchResults = franchiseAPI.searchFranchiseName(searchName)</span>
<span class="nc bnc" id="L126" title="All 4 branches missed.">    if (searchResults.isEmpty()) {</span>
<span class="nc" id="L127">        println(&quot;No franchises found&quot;)</span>
    } else {
<span class="nc" id="L129">        println(searchResults)</span>
    }
<span class="nc" id="L131">}</span>

<span class="nc" id="L133">fun listFranchises() = println(franchiseAPI.listAllFranchises())</span>

// GAMES ///////////////////////////////////////////////////////////////////////////////
private fun addGame() {
<span class="nc" id="L137">    val franchise: Franchise? = chooseFranchise()</span>
<span class="nc bnc" id="L138" title="All 2 branches missed.">    if (franchise != null) {</span>
<span class="nc bnc" id="L139" title="All 2 branches missed.">        if (franchise.addGame(</span>
<span class="nc" id="L140">                Game(</span>
<span class="nc" id="L141">                        gameName = readNextLine(&quot;\t Game Name: &quot;),</span>
<span class="nc" id="L142">                        gamePrice = readNextInt(&quot;\t Game Price: &quot;)</span>
                    )
            )
        )
<span class="nc" id="L146">            println(&quot;Added Successfully!&quot;)</span>
<span class="nc" id="L147">        else println(&quot;Add NOT Successful&quot;)</span>
    }
<span class="nc" id="L149">}</span>

fun updateGame() {
<span class="nc" id="L152">    val franchise: Franchise? = chooseFranchise()</span>
<span class="nc bnc" id="L153" title="All 2 branches missed.">    if (franchise != null) {</span>
<span class="nc" id="L154">        val game: Game? = chooseGame(franchise)</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">        if (game != null) {</span>
<span class="nc" id="L156">            val newName = readNextLine(&quot;Enter new name: &quot;)</span>
<span class="nc" id="L157">            val newPrice = readNextInt(&quot;Enter new price: &quot;)</span>
<span class="nc bnc" id="L158" title="All 2 branches missed.">            if (franchise.update(game.gameId, Game(gameName = newName, gamePrice = newPrice))) {</span>
<span class="nc" id="L159">                println(&quot;Game updated&quot;)</span>
            } else {
<span class="nc" id="L161">                println(&quot;Game NOT updated&quot;)</span>
            }
        } else {
<span class="nc" id="L164">            println(&quot;Invalid Game Id&quot;)</span>
        }
    }
<span class="nc" id="L167">}</span>

fun deleteGame() {
<span class="nc" id="L170">    val franchise: Franchise? = chooseFranchise()</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">    if (franchise != null) {</span>
<span class="nc" id="L172">        val game: Game? = chooseGame(franchise)</span>
<span class="nc bnc" id="L173" title="All 2 branches missed.">        if (game != null) {</span>
<span class="nc" id="L174">            val isDeleted = franchise.delete(game.gameId)</span>
<span class="nc bnc" id="L175" title="All 2 branches missed.">            if (isDeleted) {</span>
<span class="nc" id="L176">                println(&quot;Delete Successful!&quot;)</span>
            } else {
<span class="nc" id="L178">                println(&quot;Delete NOT Successful&quot;)</span>
            }
        }
    }
<span class="nc" id="L182">}</span>

fun searchGames() {
<span class="nc" id="L185">    val searchName = readNextLine(&quot;Enter name of game to search for: &quot;)</span>
<span class="nc" id="L186">    val searchResults = franchiseAPI.searchGameName(searchName)</span>
<span class="nc bnc" id="L187" title="All 4 branches missed.">    if (searchResults.isEmpty()) {</span>
<span class="nc" id="L188">        println(&quot;No games of that name&quot;)</span>
    } else {
<span class="nc" id="L190">        println(searchResults)</span>
    }
<span class="nc" id="L192">}</span>

<span class="nc" id="L194">fun listGames() = println(franchiseAPI.listAllGames())</span>

// HELPERS ///////////////////////////////////////////////////////////////////////////
private fun chooseFranchise(): Franchise? {
<span class="nc" id="L198">    listFranchises()</span>
<span class="nc bnc" id="L199" title="All 2 branches missed.">    if (franchiseAPI.numberOfFranchises() &gt; 0) {</span>
<span class="nc" id="L200">        val franchise = franchiseAPI.findFranchise(readNextInt(&quot;\nEnter the id of the franchise: &quot;))</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">        if (franchise != null) {</span>
<span class="nc" id="L202">            return franchise</span>
        } else {
<span class="nc" id="L204">            println(&quot;Franchise id is invalid&quot;)</span>
        }
    }
<span class="nc" id="L207">    return null</span>
}
private fun chooseGame(franchise: Franchise): Game? {
<span class="nc bnc" id="L210" title="All 2 branches missed.">    if (franchise.numberOfGames() &gt; 0) {</span>
<span class="nc" id="L211">        print(franchise.listGames())</span>
<span class="nc" id="L212">        return franchise.findOne(readNextInt(&quot;\nEnter the id of the game: &quot;))</span>
    } else {
<span class="nc" id="L214">        println(&quot;No games in chosen franchise&quot;)</span>
<span class="nc" id="L215">        return null</span>
    }
}

fun save() {
<span class="nc" id="L220">    try {</span>
<span class="nc" id="L221">        franchiseAPI.save()</span>
<span class="nc" id="L222">    } catch (e: Exception) {</span>
<span class="nc" id="L223">        System.err.println(&quot;Error writing to file: $e&quot;)</span>
    }
<span class="nc" id="L225">}</span>

fun load() {
<span class="nc" id="L228">    try {</span>
<span class="nc" id="L229">        franchiseAPI.load()</span>
<span class="nc" id="L230">    } catch (e: Exception) {</span>
<span class="nc" id="L231">        System.err.println(&quot;Error reading from file: $e&quot;)</span>
    }
<span class="nc" id="L233">}</span>
fun exit() {
<span class="nc" id="L235">    println(&quot;Exiting app&quot;)</span>
<span class="nc" id="L236">    exitProcess(0)</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>